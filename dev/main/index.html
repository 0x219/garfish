<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Main project</title>
  <style>
    b { cursor: pointer; }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mobx/5.15.7/mobx.umd.js"></script>
  <script>
    window.addEventListener('error',function (...args) {
      console.log('mainApp: normal error',args)
    });

    window.addEventListener('unhandledrejection',function (...args) {
      console.log('mainApp: unhandledrejection error',args);
    });
  </script>

  <script>
    setTimeout(()=>{
      throw Error('mainApp: unhandledrejection error');
    },5000)
  </script>
  <script>
      // window.addEventListener('unhandledrejection', event => {
      //   event.promise.catch((e)=>{
      //     if (e instanceof Error) {
      //       console.log('main app get error:', event); // 捕获后自定义处理
      //     }
      //   })
      // }, true);
      // window.addEventListener('error', event => {
      //   console.log('main app get error:', event); // 捕获后自定义处理
      // }, true);
  </script>
</head>
<body>
  <div id="MainApp">
    <!-- <script src="1xxx" ></script> -->
    <div>
      <h1 align="center">Main project</h1>
      <h2 align="center">
        <b id="vueBtn">vue</b>
        <b id="reactBtn">react</b>
      </h2>
    </div>
    <div id="submoduleByRouter"></div>
    <div id="submoduleByCunstom"></div>
  </div>
  <script>
    // function load() {
    //   const iframe = document.createElement('iframe');
    //   iframe.style.display = 'none';
    //   document.body.appendChild(iframe);

    //   const fakeWindow = {
    //     tt: 1,
    //   }

    //   Object.defineProperty(iframe.contentWindow, 'window', {
    //     get: () => fakeWindow,
    //   })

    //   const js = iframe.contentDocument.createElement('script');
    //   js.textContent = `
    //     console.log(window.window)
    //     // with(window.parent.fakeWindow) {
    //     //   import('./esm.js').then(m => {
    //     //     console.log(m)
    //     //     console.log(window.a)
    //     //   });
    //     // }
    //   `
    //   iframe.contentDocument.body.appendChild(js)
    //   window.w = iframe
    // }
    // load();
  </script>
</body>
</html>
